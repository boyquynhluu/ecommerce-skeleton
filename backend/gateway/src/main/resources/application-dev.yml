server:
  port: 8080

spring:
  application:
    name: API-GATEWAY

  cloud:
    gateway:
      discovery:
        locator:
          enabled: true
          lower-case-service-id: true
      routes:
        # Route API catalog
        - id: catalog-service
          uri: lb://CATALOG-SERVICE
          predicates:
            - Path=/catalog/**

        # Route API inventory
        - id: inventory-service
          uri: lb://INVENTORY-SERVICE
          predicates:
            - Path=/inventory/**

        # Route API order
        - id: order-service
          uri: lb://ORDER-SERVICE
          predicates:
            - Path=/orders/**

        # Route API Auth
        - id: auth-service
          uri: lb://AUTH-SERVICE
          predicates:
            - Path=/auth/**

        # ====== ROUTES DOCS SWAGGER =======

        # Route swagger API catalog
        - id: catalog-api-docs
          uri: lb://CATALOG-SERVICE
          predicates:
            - Path=/api-docs/catalog
          filters:
            - RewritePath=/api-docs/catalog, /v3/api-docs

        # Route swagger API order
        - id: order-api-docs
          uri: lb://ORDER-SERVICE
          predicates:
            - Path=/api-docs/order
          filters:
            - RewritePath=/api-docs/order, /v3/api-docs

        # Route swagger API inventory
        - id: inventory-api-docs
          uri: lb://INVENTORY-SERVICE
          predicates:
            - Path=/api-docs/inventory
          filters:
            - RewritePath=/api-docs/inventory, /v3/api-docs

        # Route swagger API auth
        - id: auth-api-docs
          uri: lb://AUTH-SERVICE
          predicates:
            - Path=/api-docs/auth
          filters:
            - RewritePath=/api-docs/auth, /v3/api-docs

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8762/eureka/
    register-with-eureka: true
    fetch-registry: true

management:
  endpoint:
    gateway:
      enabled: true              # ðŸ‘ˆ báº­t endpoint gateway
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,gateway

springdoc:
  swagger-ui:
    urls:
      # API catalog
      - name: ${app.catalog-name}
        url: /api-docs/catalog
      # API order
      - name: ${app.order-name}
        url: /api-docs/order
      # API inventory
      - name: ${app.inventory-name}
        url: /api-docs/inventory
      # API auth
      - name: ${app.auth-name}
        url: /api-docs/auth

app:
  catalog-name: Catalog Service
  order-name: Order Service
  inventory-name: Inventory Service
  auth-name: Auth Service